// Benjamin Aranda Jesse Bassett Joaquin Bonifaz Chris Lasch
function partialSum(e){return e.reduce((etro)=>{const a=o.slice(0r+1)s=a.reduce((et)=>e+t0);return[...es]}[])}function setup(){colorMode(HSB)canvas=createCanvas(DIMDIMWEBGL)noStroke()rect(100*M500*M50*M50*M)pixelDensity(2)1==mobile?(txG=createGraphics(txWtxHWEBGL)txS=txG.createShader(basicVert2fragShaderA)):(shaderA=createShader(basicVertfragShaderA)shaderA.setUniform("u_resolution"[DIMDIM])shad_Size=1024bkrez=2800myImg=createImage(8*shad_Sizeshad_Size))shaderBK=createShader(basicVertfragShaderA)shaderBK.setUniform("u_resolution"[bkrezbkrez])bkImg=createImage(bkrezbkrez)sPress()sun=new p5.Vector(1-11)sun.normalize()gBorder=2gScale=20gVals=growth_Max+gBordergVals=bkGridTrueMaxgrw=new GrowSys(1)rg=new Grid_Rhomb(gValsgValsgValsgScale);let e=patternSelect[0];for(targetPt=rg.gPts[e.x][e.y][e.z]patternSelect.shift()go.push(new Go3d(1targetPt.xtargetPt.ytargetPt.zgScale))currGo=go[0]goNum=1i=0;i<goNum;i++){goDepot[i]=[]resetDepot[i]=[]nextGrow();for(let e=0;e<go.length;e++){resetDepot[i][e]=[];for(let t=0;t<go[e].verts.length-2;t++)resetDepot[i][e].push(new p5.Vector(go[e].verts[t].xgo[e].verts[t].ygo[e].verts[t].z))}goDepot[i]=gogoModelsDepot.push(goModels)}currCluster=goNum-1grow=-1timer=0color0=color(hRsRbR)color1=color0color2=color0;let t=R.random_int(1/6*goModels.length.8*goModels.length)r=Math.round(5/12*goModels.length)o=t+r*(1/3)a=t+.5*rs=t+r*(2/3)n=t+1*rc=R.random_int(03);for(i=0;i<goModels.length;i++)renderPattern.push(0)1==ERASE&&i>5&&i<.33*goModels.length&&(renderPattern[i]=1)1==WIREFRAME?0==c?i>t&&i<n&&(renderPattern[i]=3):1==c?i>t&&i<a?renderPattern[i]=3:i>a&&i<n&&(renderPattern[i]=5):2==c?i>t&&i<o?renderPattern[i]=3:i>o&&i<s&&(renderPattern[i]=3):i>s&&i<n?renderPattern[i]=5:i>t&&i<n&&(renderPattern[i]=3):1==OPAQUE?i>t&&i<n&&(renderPattern[i]=2):renderPattern.push(0)}function draw(){if(1==drawTex){if(drawTex=!11==mobile){txG.noStroke()txG.shader(txS)txS.setUniform("u_resolution"[txHtxH]);for(let e=0;e<8;e++)console.log("txG mode Jesse")readUniforms(txSe)txG.rect(e*txW/8-txW/2-txH/2txW/8txH);txG.resetShader()}else{shaderA.setUniform("u_resolution"[shad_Sizeshad_Size])shader(shaderA)resizeCanvas(shad_Sizeshad_Size!1);for(let e=0;e<8;e++)readUniforms(shaderAe)rect(004040)myImg.copy(canvas002*shad_Size2*shad_Sizeshad_Size*e02*shad_Size2*shad_Size);resetShader()}resizeCanvas(bkrezbkrez!1)shader(shaderBK);let e=2*v;UNIVAR[8][0][0]=ebkgd_f!=bkgd_cat.arr[2].name&&(UNIVAR[8][0][1]=e+R.random_num(-2020)UNIVAR[8][0][2]=e+R.random_num(-3030)UNIVAR[8][0][3]=e+R.random_num(-3020)UNIVAR[8][1][0]=e+R.random_num(-2030))UNIVAR[8][12][0]*=e/60UNIVAR[8][12][1]*=e/60UNIVAR[8][12][2]*=e/60UNIVAR[8][12][3]*=e/60UNIVAR[8][13][0]*=e/60readUniforms(shaderBK8)rect(004040)bkImg.copy(canvas00bkrezbkrez00bkrezbkrez)resetShader()resizeCanvas(DIMDIM!1)}if(background(color1)makeBorder()lightFalloff(.0033e-40)ambientLight(color0)noStroke()0==run_animation&&(steps=go.length)1==grow)steps>=go.length?steps=go.length:millis()>timer&&(timer+=delaysteps++);else if(-1==grow)if(steps<=1){currCluster+=1currCluster>goNum-1&&(currCluster=0)1==initGrow&&(go=[]resetGo=[]go=goDepot[currCluster].slice()resetGo=resetDepot[currCluster].slice()goModels=goModelsDepot[currCluster]initGrow=!1)zoomStart=zoomcamStart=[cam[0]cam[1]cam[2]]camTarg=[camTarg[0]camTarg[1]camTarg[2]];for(let e=0;e<go.length;e++)for(let t=0;t<go[e].verts.length-2;t++)go[e].verts[t]=new p5.Vector(resetGo[e][t].xresetGo[e][t].yresetGo[e][t].z);ratio=+camSpeedvStart=vTargsteps=1grow*=-1}else millis()>timer&&(timer+=delaysteps-=3);if(push()stroke(25500)strokeWeight(6)line(000001e5)pop()updateCam()1==swap&&(save("primitive")pixelDensity(2)ortho(-v*zoomv*zoom-v*zoomv*zoom-1e41e4)prtScn=!1swap=!1)1==prtScn){let e=4800/DIM;pixelDensity(e)ortho(-v*zoomv*zoom-v*zoomv*zoom-1e41e4)swap=!0}}function readUniforms(et){for(let r=0;r<UNI.length;r++)e.setUniform(UNI[r]UNIVAR[t][r])}function lPress(){camStart=[cam[0]cam[1]cam[2]]camTarg=[0camTarg[1]+anglecamTarg[2]+angle]zoomStart=zoommyAngle+=anglezflag--zflag<0&&(zflag=2)zoomTarg=0==zflag?defaultZoom/2:defaultZoomratio=+camSpeedvStart=vTarggetModelExtents()}function rPress(){camStart=[cam[0]cam[1]cam[2]]camTarg=[0camTarg[1]-anglecamTarg[2]-angle]zoomStart=zoommyAngle-=anglezflag++zflag>=3&&(zflag=0)zoomTarg=0==zflag?defaultZoom/2:defaultZoomratio=+camSpeedvStart=vTarggetModelExtents()}function sPress(){camStart=[cam[0]cam[1]cam[2]]camTarg=[cam[0]cam[1]cam[2]]Math.abs((myAngle+zoomRR)%Math.PI)<=ZoomPercent?(zoomTarg=defaultZoom/2zflag=0):(zoomTarg=defaultZoomzoomRRR>=.5?zflag=1:zoomRRR<=.5&&(zflag=2))zoomStart=zoomTargratio=+camSpeedratio=.98999}function touchStarted(){mouseX>WIDTH/2?rPress():mouseX<WIDTH/2&&lPress()}function keyPressed(){if(keyCode===LEFT_ARROW?lPress():keyCode===RIGHT_ARROW?rPress():keyCode===UP_ARROW?(zoomStart=zoomzoomTarg=defaultZoom/2ratio=+camSpeedcamStart=[cam[0]cam[1]cam[2]]camTarg=[0camTarg[1]camTarg[2]]vStart=vTarggetModelExtents()):keyCode===DOWN_ARROW&&(zoomStart=zoomzoomTarg=defaultZoomratio=+camSpeedcamStart=[cam[0]cam[1]cam[2]]camTarg=[0camTarg[1]camTarg[2]]vStart=vTarggetModelExtents())"o"==key||"O"==key){let e=[]t=[]r=0;for(let o=0;o<go.length;o++)if(1!=renderPattern[o])for(let a=0;a<go[o].faces.length;a++){for(let t=0;t<go[o].faces[a].facePts.length;t++)e.push("v "+go[o].faces[a].facePts[t].x+" "+go[o].faces[a].facePts[t].y+" "+go[o].faces[a].facePts[t].z)r+=1;t.push("f "+(r-2)+" "+(r-1)+" "+r)}let o=e.concat(t);saveStrings(o"primitive""obj")}"i"!=key&&"I"!=key||(prtScn=!0console.log(prtScn)console.log(swap))"u"!=key&&"U"!=key||myImg.save("primitive texture""png")"g"!=key&&"G"!=key||(run_animation=!0grow=-1)}function makeBorder(){push()scale(zoom)fill(color2);let e=.1*v/1.15;1==BKTEXT&&(push()lightFalloff(.0033e-40)ambientLight(color0)texture(bkImg)translate(00-1e3)box(1.15*(2*v-e)/zoom1.15*(2*v-e)/zoom)pop())push()translate(-1.15*v/1.1501e3)box(e5*v)pop()push()translate(1.15*v/1.1501e3)box(e5*v)pop()push()translate(01.15*v/1.151e3)box(5*ve)pop()push()translate(0-1.15*v/1.151e3)box(5*ve)pop()pop()}function nextGrow(){cam=[0cam[1]-myAnglecam[2]-myAngle]camStart=[0camStart[1]-myAnglecamStart[2]-myAngle]camTarg=[0camTarg[1]-myAnglecamTarg[2]-myAngle]v=0vStart=0vTarg=0steps=0mGo=0go=[]goModels=[]go.push(new Go3d(1targetPt.xtargetPt.ytargetPt.zgScale))currGo=go[0];R.random_int(1Math.floor(growth_Max/2))Math.floor(growth_Max/2)R.random_int(1growth_Max-1)R.random_int(1growth_Max-1);currArraySize=go.length;for(let e=0;e<patternSelect.length;e++){let t=patternSelect[e];grw.growToTarget(rg.gPts[t.x][t.y][t.z])}getModelExtents();for(let e=0;e<go.length;e++){go[e].center.x+=-centerXgo[e].center.y+=-centerYgo[e].center.z+=-centerZ;for(let t=0;t<go[e].faces.length;t++){go[e].faces[t].center.x+=-centerXgo[e].faces[t].center.y+=-centerYgo[e].faces[t].center.z+=-centerZ;for(let r=0;r<go[e].faces[t].facePts.length;r++)go[e].faces[t].facePts[r].x+=-centerXgo[e].faces[t].facePts[r].y+=-centerYgo[e].faces[t].facePts[r].z+=-centerZ}}for(let e=0;e<go.length;e++)for(let t=0;t<go[e].verts.length;t++)go[e].verts[t].x+=-centerXgo[e].verts[t].y+=-centerYgo[e].verts[t].z+=-centerZ;xMax+=-centerXxMin+=-centerXyMax+=-centerYyMin+=-centerYzMax+=-centerZzMin+=-centerZgetModelExtents()0==v&&(v=vTargvStart=vTarg);for(let e=0;e<go.length;e++)geom=new p5.Geometry(11buildModel)geom.gid="go"+mGo+"_"+R.random_dec()goModels.push(geom)mGo++}function buildModel(){let e=0;for(let t=0;t<go[mGo].faces.length;t++){let r=[];for(let o=0;o<go[mGo].faces[t].facePts.length;o++)this.vertices.push(go[mGo].faces[t].facePts[o])r.push(e)e+=1;this.faces.push([r[0]r[1]r[2]])n=createVector(go[mGo].faces[t].normal.xgo[mGo].faces[t].normal.ygo[mGo].faces[t].normal.z)n.normalize()this.vertexNormals.push(nnn);let o=1/8a=sun.dot(n)s=(sun.angleBetween(n)map(a-1107));s=round(s);let c=this.vertices[r[0]].dist(this.vertices[r[1]])i=this.vertices[r[0]].dist(this.vertices[r[2]])l=this.vertices[r[1]].dist(this.vertices[r[2]]);c=map(c041.7156325614271401)i=map(c041.7156325614271401)l=map(c041.7156325614271401)"e"==go[mGo].faces[t].type?(this.uvs.push([o*s0])this.uvs.push([o*sc])this.uvs.push([o*s+.866*c*oc/2])):c>i&&c>l?(this.uvs.push([o*s0])this.uvs.push([o*sc])this.uvs.push([o*s+.809*c*oc/2])):i>c&&i>l?(this.uvs.push([o*s0])this.uvs.push([o*s+.809*i*oi/2])this.uvs.push([o*si])):l>c&&l>i&&(this.uvs.push([o*s+.809*l*ol/2])this.uvs.push([o*s0])this.uvs.push([o*sl]));let m=R3.random_dec()d=R4.random_dec();if(m<=.5)for(let e=0;e<this.uvs.length;e++)this.uvs[e][1]=1-this.uvs[e][1];if(d<=.5)for(let e=0;e<this.uvs.length;e++);}}function getModelExtents(){let etr=[]o=[]a=[];for(let e=0;e<go.length;e++)for(let t=0;t<go[e].verts.length-2;t++)r.push(go[e].verts[t].x)o.push(go[e].verts[t].y)a.push(go[e].verts[t].z);r.sort((et)=>e-t)o.sort((et)=>e-t)a.sort((et)=>e-t)xMin=r[0]xMax=r[r.length-1]yMin=o[0]yMax=o[o.length-1]zMin=a[0]zMax=a[a.length-1]centerX=(xMax-xMin)/2+xMincenterY=(yMax-yMin)/2+yMincenterZ=(zMax-zMin)/2+zMine=Math.max(xMaxMath.abs(xMin))t=Math.max(yMaxMath.abs(yMin))vTarg=Math.max(et)}function drawGrid(){push();let e=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2)t=bkGridDrawBoundsX+er=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2)o=bkGridDrawBoundsY+ra=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2)s=bkGridDrawBoundsZ+a;if(stroke(000)strokeWeight(1)0==ignX)for(let n=r;n<=o;n++)for(let r=a;r<=s;r++)line(rg.gPts[e][n][r].xrg.gPts[e][n][r].yrg.gPts[e][n][r].zrg.gPts[t][n][r].xrg.gPts[t][n][r].yrg.gPts[t][n][r].z);if(0==ignY)for(let n=e;n<=t;n++)for(let e=a;e<=s;e++)line(rg.gPts[n][r][e].xrg.gPts[n][r][e].yrg.gPts[n][r][e].zrg.gPts[n][o][e].xrg.gPts[n][o][e].yrg.gPts[n][o][e].z);if(0==ignZ)for(let n=e;n<=t;n++)for(let e=r;e<=o;e++)line(rg.gPts[n][e][a].xrg.gPts[n][e][a].yrg.gPts[n][e][a].zrg.gPts[n][e][s].xrg.gPts[n][e][s].yrg.gPts[n][e][s].z);pop()}function windowResized(){DIM=min(windowWidthwindowHeight)resizeCanvas(DIMDIM)}function setLineDash(e){drawingContext.setLineDash(e)}function dash_line(etroasnc){let i=createVector(etr)l=createVector(oas)m=p5.Vector.sub(li)d=m.mag()h=int(d/(n+c));push()translate(etr);let g=m.copy().setMag(n)f=m.copy().setMag(n+c);for(let e=0;e<h;e++)line(000g.xg.yg.z)translate(f.xf.yf.z);pop()}function updateCam(){for(push()rotateZ(cam[2])rotateY(cam[1])push()i=0;i<steps;i++)0==renderPattern[i]?(1==mobile?texture(txG):texture(myImg)model(goModels[i])):1==renderPattern[i]||(2==renderPattern[i]?(noStroke()fill(255)model(goModels[i])noFill()):3==renderPattern[i]?(stroke(0)strokeWeight(1)noFill()model(goModels[i])noStroke()):4==renderPattern[i]?(stroke(0)strokeWeight(1)fill(255)model(goModels[i])noStroke()noFill()):5==renderPattern[i]?(1==mobile?texture(txG):texture(myImg)stroke(0)strokeWeight(1)model(goModels[i])noStroke()):(noStroke()1==mobile?texture(txG):texture(myImg)model(goModels[i])));if(pop()1==BKGRID&&drawGrid()pop()ratio>0&&ratio<1){ratio>=.99999&&(ratio=1)zoom=lerp(zoomStartzoomTargratio)cam[0]=lerp(camStart[0]camTarg[0]ratio)cam[1]=lerp(camStart[1]camTarg[1]ratio)cam[2]=lerp(camStart[2]camTarg[2]ratio)v=lerp(vStartvTargratio);let e=1-ratio;ratio+=e*easing1==camZoomInit&&(ratio=.99999zoom=defaultZoom/2camZoomInit=!1)}ortho(-v*zoomv*zoom-v*zoomv*zoom-1e41e4)}function pointRotateY(et){let r=new p5.Vector;return r.x=e.z*Math.sin(t)+e.x*Math.cos(t)r.y=e.yr.z=e.z*Math.cos(t)-e.x*Math.sin(t)r}function pointRotateZ(et){let r=new p5.Vector;return r.x=e.x*Math.cos(t)-e.y*Math.sin(t)r.y=e.x*Math.sin(t)+e.y*Math.cos(t)r.z=e.zr}function reflect3d(et){let r=new p5.Vector(000)o=new Face(t.facePts[0]t.facePts[1]t.facePts[2])a=new p5.Vector(o.facePts[0].xo.facePts[0].yo.facePts[0].z)s=p5.Vector.sub(o.facePts[1]o.facePts[0])n=p5.Vector.sub(o.facePts[2]o.facePts[0])c=n.cross(s);if(c.normalize()gTestPV0=agTestPV1=sgTestPV2=n0==e.dist(o.facePts[0])||0==e.dist(o.facePts[1])||0==e.dist(o.facePts[2]))r.x=e.xr.y=e.yr.z=e.z;else{let t=p5.Vector.sub(eo.facePts[0])s=Math.abs(t.angleBetween(c))n=t.cross(c);n.normalize()n.mult(20)testCross1=new p5.Vector(n.xn.yn.z)n.normalize();let i=c.cross(n);i.normalize()i.mult(t.mag()*sin(s))c.normalize()c.mult(t.mag()*cos(s));let l=new p5.Vector(c.xc.yc.z);l.mult(-1)r.x=l.xr.y=l.yr.z=l.zretV1=new p5.Vector(r.xr.yr.z)r.add(i)retV2=new p5.Vector(r.xr.yr.z)r.add(a)retV3=new p5.Vector(r.xr.yr.z)}return r}function scale3d(etr){let o=new p5.Vector(000);return o.x=e.x+-1*t.xo.y=e.y+-1*t.yo.z=e.z+-1*t.zo.x=o.x*ro.y=o.y*ro.z=o.z*ro.x=o.x+t.xo.y=o.y+t.yo.z=o.z+t.zo}function vertex_average(e){let t=new p5.Vector(000);for(let r=0;r<e.length;r++)t.x=t.x+e[r].xt.y=t.y+e[r].yt.z=t.z+e[r].z;let r=e.length;return t.x=t.x/rt.y=t.y/rt.z=t.z/rt}document.oncontextmenu=(()=>!1);class Random{constructor(){this.useA=!1;let e=function(e){let t=parseInt(e.substr(08)16)r=parseInt(e.substr(88)16)o=parseInt(e.substr(168)16)a=parseInt(e.substr(248)16);return function(){t|=0r|=0o|=0a|=0;let e=(t+r|0)+a|0;return a=a+1|0t=r^r>>>9r=o+(o<<3)|0o=o<<21|o>>>11o=o+e|0(e>>>0)/4294967296}};this.prngA=new e(tokenData.hash.substr(232))this.prngB=new e(tokenData.hash.substr(3432));for(let e=0;e<1e6;e+=2)this.prngA()this.prngB()}random_dec(){return this.useA=!this.useAthis.useA?this.prngA():this.prngB()}random_num(et){return e+(t-e)*this.random_dec()}random_int(et){return Math.floor(this.random_num(et+1))}}let RR1R2R3R4R10R11grw;R=new RandomR1=new RandomR2=new RandomR3=new RandomR4=new RandomR10=new RandomR11=new Random;class Category{constructor(e=[{name:"default"chance:1amount:1min:0max:1}]){this.count=500this.arr=ethis.select={}}setByAmount(){let e=0;for(let t=0;t<this.arr.length;t++)e+=this.arr[t].amount;this.count=e;for(let e=0;e<this.arr.length;e++)this.arr[e].chance=this.arr[e].amount/this.count}setByChance(e=this.count){let t=0;for(let e=0;e<this.arr.length;e++)t+=this.arr[e].chance;if(t>=.9999999999&&t<=1.00000000001)for(let e=0;e<this.arr.length;e++)this.arr[e].amount=this.arr[e].chance*this.count;else console.log("Improper Sum: "+t)}sum(){let e=[]t=[];t.push(0);for(let r=0;r<this.arr.length;r++)e.push(this.arr[r].chance)t.push(this.arr[r].chance);t.pop()e=partialSum(e)t=partialSum(t);for(let r=0;r<this.arr.length;r++)this.arr[r].min=t[r]this.arr[r].max=e[r]}pickCategory(){let et=R.random_dec();for(let r=0;r<this.arr.length;r++)this.arr[r].min<=t&&t<this.arr[r].max&&(e=this.arr[r].name);return this.select={name:evalue:t}{name:evalue:t}}setCategory(e){let tr=0;for(let r=0;r<this.arr.length;r++)e==this.arr[r].name&&(t=this.arr[r].name);return this.select={name:tvalue:r}{name:tvalue:r}}setCategoryValue(e){let tr;for(let o=0;o<this.arr.length;o++)this.arr[o].min<=e&&e<this.arr[o].max&&(r=this.arr[o].namet=e);return this.select={name:rvalue:t}{name:rvalue:t}}}let currGocurrFacecurrPointtargetPtgo=[]resetGo=[]goDepot=[]resetDepot=[]steps=0currArraySize=0zflag=0sun=new p5.Vector(1-11);sun.normalize();let geomtimerimgcenterXcenterYcenterZxMinxMaxyMinyMaxzMinzMaxgoNumrandrand1rand2rand3zoomRRnummyAngle=0mGo=0goModels=[]goModelsDepot=[]delay=3bBox=[]currCluster=0grow=1initGrow=!0;var DEFAULT_SIZE=1400WIDTH=window.innerWidthHEIGHT=window.innerHeightDIM=Math.min(WIDTHHEIGHT)M=DIM/DEFAULT_SIZE;let myImgcanvasshaderArgpatternSelectbkImgshaderBKbkUniformLstring="ffff+fff"shad_Size=512drawTex=!0UNI=["LF1""LF2""LR1""LR2""dA1""dA2""df1""df2""wb1""wb2""bb1""bb2""Nf1""Nf2""Nn1""Nn2""Nx1""Nx2""indx""Ld""cBlend"]sG=10UNIVAR=[[[54.64+sG49.324+sG40.324+sG50+sG][80.48+sG0][1.57079632679-.788-.788-4.668][3.6040][2100.16100.162.88][2.880][147.2516.8516.8589.6][589.60][3.4244.8164.8164.056][3.5920][1.484.86.86.86][.860][4043.75241.75224.216][01.2][-.02-.26-.26.1][00][.304.376.376.376][01]1[0000].796][[52.696+sG54.324+sG55.324+sG62.392+sG][80.48+sG0][0.7961.643.196][5.3325][11.712100.16100.162.88][2.880][247.2516.8516.8589.6][589.60][2.9043.6083.1923.224][3.5920][1.484.86.86.86][.860][16.37635.83236.1363.312][4.152-1.152][0.22-.124.1][.1.1][0.4.561.128][1.1281]2[0000].796][[54.64+sG49.324+sG49.324+sG49.284+sG][80.48+sG0][01.584.5482.316][3.6040][11.712100.16100.1698.696][2.880][247.2516.8516.8621.6][589.60][3.4883.0883.0563.848][3.5920][1.484.86.86.86][.860][16.37635.83236.13636.136][4.152-1.5][-0-.26-.124-.124][.1.1][.4.4.56.592][1.1281]3[0000].796][[60.32+sG49.324+sG49.324+sG49.284+sG][80.408+sG0][2.227.8366.8282.316][3.9320][11.63211.256100.1698.696][2.880][553.6290.4516.8621.6][589.60][2.923.843.7123.88][2.8320][.2761.188.86.86][.860][16.37635.83236.13636.136][4.152.7][.388.212-.124-.124][.1.1][1.024.424.56.592][1.5441]4[-.1682.3361.506.952].81][[53.72+sG46.468+sG49.324+sG49.284+sG][50.352+sG0][3.9632.0326.876.1][2.6040][13.38411.112100.1698.696][3.240][487.2290.4516.8621.6][589.60][2.6962.8082.4882.96][1.4640][.1961.188.9.86][.860][16.37635.83224.26433.872][3.2-.8][.572.212-.124-.124][-.084.05][.976.656.48.592][1.816.9]5[.63.378.6013.632].924][[58.408+sG46.468+sG53.916+sG51.336+sG][40.424+sG0][4.7071.1046.6762.596][2.980][12.20810.12100.1698.704][2.880][578.4290.4516.8621.6][589.60][1.1562.3762.3762.168][2.2080][.7081.188.86.86][.860][18.16840.832253.136][3.1121.112][.108.212-.124-.116][.1.1][1.304.512.561.072][1.1041.104]6[0000].796][[60.32+sG60.324+sG61.692+sG61.336+sG][50.424+sG0][2.091.7964.7242.596][4.7880][18.37610.544100.1698.704][2.880][553.6444516.8621.6][589.60][1.6162.282.722.312][1.7760][1.4841.188.86.86][.860][16.74435.83236.1363.136][4.3360][.388.212-.508-.124][.10][1.0961.2481.36.592][1.7680]7[0000].796][[60.32+sG80.324+sG51.692+sG60.368+sG][1+sG0][6.4271.0126.8284.836][10][11.63210.056100.1698.696][40][553.6444516.8621.6][.40][1.44.922.2562.024][.20][1.4841.188.86.86][.20][16.1635.83236.1363.136][.10][.388.212-.508-.124][00][1.0961.2481.784.496][00]8[0000].796]]gBorder=1gScale=20gVals=7+gBordergrowth_Max=7growth_percent=.5growth_type_ratio=.5small_death_chance=.1BKGRID=!1bkGridTrueMax=27bkGridDrawBoundsX=11bkGridDrawBoundsY=11bkGridDrawBoundsZ=11pS=1BKTEXT=!1bkrez=2048bkSCALE=250bkrot=0bkfreq=0bkamp=0bkNscale=0bkNmin=0bkNmax=0pattDirector=[]pattOrgClust=[[00-1][120][220][420][520][720][321][431][621][721]]pattOrgBranch=[[133][243][143][133][243][143][151][161][171][251][341]]pattOrgLoop=[[441][451][541][551][651][731][741]]pattOrgLine=[[833][843][833][843][833][843][851][861][871]]pattOrgHole=[[100-1][100-1][100-1][231][441][631]]pattOrgPT=[[90-1][90-1][90-1][90-1][90-1][90-1][900][900][900][900][900][900][901]]ERASE=!1WIREFRAME=!1OPAQUE=!1scale_lib=[{name:"fit"chance:.8}{name:"zoom"chance:.2}]colr_lib=[{name:"warm"chance:.55}{name:"cool"chance:.15}{name:"grey"chance:.2}{name:"white"chance:.1}]bkgd_lib=[{name:"blank"chance:.3}{name:"grid lattice"chance:.15}{name:"linear hatch"chance:.07}{name:"noise hatch"chance:.08}{name:"cross hatch"chance:.1}{name:"stipple hatch"chance:.1}{name:"dark hatch"chance:.2}]patt_lib=[{name:"cluster"chance:.55}{name:"branch"chance:.1}{name:"loop"chance:.05}{name:"hole"chance:.1}{name:"line"chance:.1}{name:"point"chance:.1}]frac_lib=[{name:"minimal"chance:.01}{name:"shallow"chance:.3}{name:"medium"chance:.36}{name:"deep"chance:.33}]scat_lib=[{name:"none"chance:.5}{name:"fragmented"chance:.5}]rndr_lib=[{name:"complete"chance:.9}{name:"proof"chance:.1}]scale_cat=new Category(scale_lib);scale_cat.setByChance()scale_cat.sum();let colr_cat=new Category(colr_lib);colr_cat.setByChance()colr_cat.sum();let bkgd_cat=new Category(bkgd_lib);bkgd_cat.setByChance()bkgd_cat.sum();let frac_cat=new Category(frac_lib);frac_cat.setByChance()frac_cat.sum();let patt_cat=new Category(patt_lib);patt_cat.setByChance()patt_cat.sum();let scat_cat=new Category(scat_lib);scat_cat.setByChance()scat_cat.sum();let rndr_cat=new Category(rndr_lib);rndr_cat.setByChance()rndr_cat.sum();let scale_f=scale_cat.pickCategory().namecolr_f=colr_cat.pickCategory().namebkgd_f=bkgd_cat.pickCategory().namefrac_f=frac_cat.pickCategory().namepatt_f=patt_cat.pickCategory().namescat_f=scat_cat.pickCategory().namerndr_f=rndr_cat.pickCategory().namerun_animation=!0DECORATE=!0prtScn=!1swap=!1camZoomInit=!0mobile=!1;WIDTH=window.innerWidthHEIGHT=window.innerHeight;2400==window.innerWidth&&2400==window.innerHeight&&(run_animation=!1)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(run_animation=!1mobile=!0);let color0color1color2hRsRbRZoomPercent=scale_lib[1].chance*Math.PI;if(colr_f==colr_cat.arr[0].name){let e=R.random_dec();e<.9?hR=R11.random_num(3065):(hR=R.random_int(0105)-40hR<0&&(hR+=360))sR=R.random_int(615)bR=R.random_int(78100)}else colr_f==colr_cat.arr[1].name?(hR=R.random_int(65320)sR=R.random_int(615)bR=R.random_int(78100)):colr_f==colr_cat.arr[2].name?(hR=R.random_int(0360)sR=R.random_int(02)bR=R.random_int(7894)):colr_f==colr_cat.arr[3].name&&(hR=R.random_int(0360)sR=R.random_int(01)bR=R.random_int(96100));if(bkgd_f==bkgd_cat.arr[0].name?(BKTEXT=!1BKGRID=!1bkUniform=[[0000][00][0000][00][0100.16100.162.88][2.880][0.2516.8516.8589.6][589.60][4.54.8164.8164.056][3.5920][4.35.86.86.86][.860][043.75241.75224.216][01.2][0-.26-.26.1][00][0.376.376.376][01]1[0000].796]):bkgd_f==bkgd_cat.arr[1].name?(BLTEXT=!1BKGRID=!0bkUniform=[[0000][00][0000][00][0100.16100.162.88][2.880][0.2516.8516.8589.6][589.60][4.54.8164.8164.056][3.5920][4.35.86.86.86][.860][043.75241.75224.216][01.2][0-.26-.26.1][00][0.376.376.376][01]1[0000].796]):bkgd_f==bkgd_cat.arr[2].name?(BKTEXT=!0BKGRID=!1bkrot=R.random_int(07)*Math.PI/4bkfreq=0bkamp=150bkNscale=0bkNmin=.65bkNmax=.651bkUniform=[[bkSCALE000][00][bkrot000][00][bkfreq100.16100.162.88][2.880][bkamp.2516.8516.8589.6][589.60][4.54.8164.8164.056][3.5920][4.35.86.86.86][.860][bkNscale43.75241.75224.216][01.2][bkNmin-.26-.26.1][00][bkNmax.376.376.376][01]1[0000].796]bkgd_f="linear hatch"):bkgd_f==bkgd_cat.arr[3].name?(BKTEXT=!0BKGRID=!1bkSCALE=200bkrot=R.random_int(07)*Math.PI/4bkfreq=0bkamp=150bkNscale=bkSCALE/4bkNmin=.3bkNmax=.651bkUniform=[[bkSCALE000][00][bkrot000][00][bkfreq100.16100.162.88][2.880][bkamp.2516.8516.8589.6][589.60][4.54.8164.8164.056][3.5920][30.86.86.86][.860][bkNscale43.75241.75224.216][01.2][bkNmin-.26-.26.1][00][bkNmax.376.376.376][01]1[0000].796]bkgd_f="linear hatch"):bkgd_f==bkgd_cat.arr[4].name?(BKTEXT=!0BKGRID=!1bkSCALE=200bkrot=R.random_int(07)*Math.PI/4bkfreq=0bkamp=150bkNscale=bkSCALE/4bkNmin=.3bkNmax=.651bkUniform=[[bkSCALEbkSCALE00][00][bkrotbkrot+Math.PI/4*R.random_int(13)00][00][bkfreq0100.162.88][2.880][bkamp.2516.8516.8589.6][589.60][4.54.8164.8164.056][3.5920][30.86.86.86][.860][bkNscalebkNscale41.75224.216][01.2][bkNminbkNmin-.26.1][00][bkNmaxbkNmax.376.376][01]1[0000].796]bkgd_f="cross hatch"):bkgd_f==bkgd_cat.arr[5].name?(BKTEXT=!0BKGRID=!1bkUniform=UNIVAR[R.random_int(12)]bkgd_f="cross hatch"):bkgd_f==bkgd_cat.arr[6].name&&(BKTEXT=!0BKGRID=!1bkUniform=UNIVAR[R.random_int(67)])patt_f==patt_cat.arr[0].name){let et=R.random_dec();t<=.6?e=0:(e=pattOrgClust.length-1e=R.random_int(1e))pattDirector=pattOrgClust[e]}else if(patt_f==patt_cat.arr[1].name){let e=pattOrgBranch.length-1;e=R.random_int(0e)pattDirector=pattOrgBranch[e]}else if(patt_f==patt_cat.arr[2].name){let e=pattOrgLoop.length-1;e=R.random_int(0e)pattDirector=pattOrgLoop[e]}else if(patt_f==patt_cat.arr[3].name){let e=pattOrgHole.length-1;e=R.random_int(0e)pattDirector=pattOrgHole[e]}else if(patt_f==patt_cat.arr[4].name){let e=pattOrgLine.length-1;e=R.random_int(0e)pattDirector=pattOrgLine[e]}else if(patt_f==patt_cat.arr[5].name){let e=pattOrgPT.length-1;e=R.random_int(0e)pattDirector=pattOrgPT[e]Lstring="ffff+fff+ff+fff+f+fff+f+ffff+ff"}if(pS=pattDirector[1]1==pattDirector[2])frac_f=frac_cat.arr[0].name;else if(0==pattDirector[2]){let e=R.random_dec();frac_f=e<=.5?frac_cat.arr[3].name:frac_cat.arr[2].name}else-1==pattDirector[2]||2==pattDirector[2]||3==pattDirector[2]&&(frac_f=frac_cat.arr[1].name);if(frac_f==frac_cat.arr[0].name?(growth_Max=10growth_percent=.8growth_type_ratio=.5small_death_chance=.2):frac_f==frac_cat.arr[1].name?(growth_Max=6growth_percent=.7growth_type_ratio=.5small_death_chance=.15):frac_f==frac_cat.arr[2].name?(growth_Max=1growth_percent=0growth_type_ratio=.5small_death_chance=.1):frac_f==frac_cat.arr[3].name&&(growth_Max=2growth_percent=.6growth_type_ratio=.5small_death_chance=.04)scat_f==scat_cat.arr[0].name||scat_f==scat_cat.arr[1].name&&(ERASE=!0)rndr_f==rndr_cat.arr[0].name);else if(rndr_f==rndr_cat.arr[1].name){let e=R.random_dec();e<.5?WIREFRAME=!0:OPAQUE=!0}let growthPts=[[{x:0y:0z:0}{x:R.random_int(1Math.floor(growth_Max/2))+Math.floor(growth_Max/2)y:R.random_int(1growth_Max-1)z:R.random_int(1growth_Max-1)}][{x:0y:0z:0}{x:0y:pSz:0}{x:0y:pSz:pS}{x:0y:pSz:0}{x:pSy:pSz:0}][{x:0y:0z:0}{x:0y:pSz:0}{x:0y:pSz:pS}{x:0y:pSz:0}{x:pSy:pSz:0}{x:0y:pSz:0}{x:pSy:0z:0}][{x:0y:0z:0}{x:0y:pSz:0}{x:0y:-pSz:0}{x:0y:0z:0}{x:pSy:0z:0}{x:-pSy:0z:0}{x:0y:0z:0}{x:0y:0z:pS}{x:0y:0z:pS}][{x:0y:0z:0}{x:0y:pSz:0}{x:pSy:pSz:0}{x:pSy:0z:0}{x:0y:0z:0}][{x:0y:0z:0}{x:0y:0z:pS}{x:0y:pSz:pS}{x:0y:pSz:0}{x:0y:0z:0}][{x:0y:0z:0}{x:0y:0z:pS}{x:pSy:0z:pS}{x:pSy:0z:0}{x:0y:0z:0}][{x:0y:0z:0}{x:0y:pSz:0}{x:pSy:pSz:pS}{x:pSy:0z:pS}{x:0y:0z:0}][{x:0y:0z:0}{x:pSy:pSz:pS}][{x:0y:0z:0}{x:1y:1z:1}][{x:0y:0z:0}{x:2y:2z:2}{x:0y:1z:0}{x:0y:0z:0}{x:0y:0z:0}{x:0y:1z:0}{x:0y:0z:0}]];patternSelect=growthPts[pattDirector[0]]UNIVAR.push(bkUniform);let xGridMax=-1e3yGridMax=-1e3zGridMax=-1e3;for(i=0;i<patternSelect.length;i++)patternSelect[i].x>=xGridMax&&(xGridMax=patternSelect[i].x)patternSelect[i].y>=yGridMax&&(yGridMax=patternSelect[i].y)patternSelect[i].z>=zGridMax&&(zGridMax=patternSelect[i].z);bkGridDrawBoundsX=xGridMax+5bkGridDrawBoundsY=yGridMax+5bkGridDrawBoundsZ=zGridMax+5;let ignX=!1ignY=!1ignZ=!1ignR=R.random_dec();for(ignR<=.33?ignX=!0:ignR>=.66?ignY=!0:ignZ=!0i=0;i<patternSelect.length;i++)patternSelect[i].x+=Math.floor(bkGridTrueMax/2)patternSelect[i].y+=Math.floor(bkGridTrueMax/2)patternSelect[i].z+=Math.floor(bkGridTrueMax/2);let bkGtxGdSX=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2)dFX=bkGridDrawBoundsX+dSXdSY=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2)dFY=bkGridDrawBoundsY+dSYdSZ=Math.ceil((bkGridTrueMax-bkGridDrawBoundsX)/2)dFZ=bkGridDrawBoundsZ+dSZrenderPattern=[]zoomRRR=R4.random_num(01);zoomRR=R4.random_num(0Math.PI)scale_f=scale_cat.arr[0].nameMath.abs((myAngle+zoomRR)%Math.PI)<=ZoomPercent&&(scale_f=scale_cat.arr[1].namezoomRR=0);let bkStxStxW=2048txH=256txSr=2048display={"Growth Pattern":patt_f"Fractal Depth":frac_fFragmentation:scat_fCompleteness:rndr_fBackground:bkgd_fScale:scale_f"Paper Color":colr_f};console.log("primatives by ArandaLasch")console.log("Benjamin Aranda Jesse Bassett Joaquin Bonifaz Chris Lasch")console.log(" ")console.log("Growth Pattern: "+patt_f)console.log("Fractal Depth:  "+frac_f)console.log("Broken/scatter: "+scat_f)console.log("Completness:    "+rndr_f)console.log("Scale:          "+scale_f)console.log("Background:     "+bkgd_f)console.log("Paper Color:    "+colr_f)window.addEventListener("keydown"function(e){["Space""ArrowUp""ArrowDown""ArrowLeft""ArrowRight"].indexOf(e.code)>-1&&e.preventDefault()}!1)
;let resetPtresetTargbasicVert="
  attribute vec3 aPosition;
  attribute vec2 aTexCoord;
  varying vec2 vTexCoord;
  void main() {
    vTexCoord=aTexCoord;
    vec4 positionVec4=vec4(aPosition1.0);
    positionVec4.xy=positionVec4.xy*2.0-1.0;
    gl_Position=positionVec4;
  }
  "basicVert2="
  attribute vec3 aPosition;
  attribute vec2 aTexCoord;
  varying vec2 vTexCoord;
  uniform mat4 uModelViewMatrix;
  uniform mat4 uProjectionMatrix;
  void main() {
    vTexCoord = aTexCoord;
    vec4 positionVec4 = vec4(aPosition 1.0);
    gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  }
"fragShaderA="
//Author:Jesse Bassett
#ifdef GL_ES
precision mediump float;
#endif
varying vec2 vTexCoord; varying vec4 Depth; uniform vec4 LF1; uniform vec2 LF2; uniform vec4 LR1; uniform vec2 LR2; uniform vec4 dA1; uniform vec2 dA2; uniform vec4 df1; uniform vec2 df2; uniform vec4 wb1; uniform vec2 wb2; uniform vec4 bb1; uniform vec2 bb2; uniform vec4 Nf1; uniform vec2 Nf2; uniform vec4 Nn1; uniform vec2 Nn2; uniform vec4 Nx1; uniform vec2 Nx2; uniform float indx; uniform vec4 Ld; uniform float cBlend; 
#define BlendScreen(baseblend) (1.0-((1.0-base)*(1.0-blend)))
vec3 mod289(vec3 x) {return x-floor(x*(1.0 / 289.0))*289.0;} vec2 mod289(vec2 x) {return x-floor(x*(1.0 / 289.0))*289.0;} vec3 permute(vec3 x) {return mod289(((x*34.0)+1.0)*x);} float snoise(vec2 v) {const vec4 C=vec4(0.2113248654051870.366025403784439-0.5773502691896260.024390243902439); vec2 i=floor(v+dot(vC.yy)); vec2 x0=v-i+dot(iC.xx); vec2 i1=vec2(0.0); i1=(x0.x > x0.y)? vec2(1.00.0):vec2(0.01.0); vec2 x1=x0.xy+C.xx-i1; vec2 x2=x0.xy+C.zz; i=mod289(i); vec3 p=permute(permute(i.y+vec3(0.0i1.y1.0))+i.x+vec3(0.0i1.x1.0)); vec3 m=max(0.5-vec3(dot(x0x0)dot(x1x1)dot(x2x2))0.0); m=m*m; m=m*m; vec3 x=2.0*fract(p*C.www)-1.0; vec3 h=abs(x)-0.5; vec3 ox=floor(x+0.5); vec3 a0=x-ox; m*=1.79284291400159-0.85373472095314*(a0*a0+h*h); vec3 g=vec3(0.0); g.x=a0.x*x0.x+h.x*x0.y; g.yz=a0.yz*vec2(x1.xx2.x)+h.yz*vec2(x1.yx2.y); return 130.0*dot(mg);} vec2 rotateUV(vec2 uvfloat rotation) {return vec2(cos(rotation)*(uv.x-0.5)+sin(rotation)*(uv.y-0.5)+0.5cos(rotation)*(uv.y-0.5)-sin(rotation)*(uv.x-0.5)+0.5);} float SmoothStep(float edge0float edge1float x){float t=clamp((x-edge0) / (edge1-edge0)0.01.0); return t;} void main() {vec2 st=vTexCoord; vec2 st_1=st; vec2 st_2=st; vec2 st_3=st; vec2 st_4=st; vec2 st_5=st; vec2 st_6=st; vec3 color=vec3(0.0); st_1=rotateUV(stLR1.x); st_1.x+=cos(st_1.y*dA1.x)/df1.x; st_1.y+=sin(st_1.x*dA1.x)/df1.x; float pos_1=st_1.x*LF1.x; float y=0.; float x=pos_1; y=sin((x+Ld.z)*Ld.y); y+=sin((x+Ld.z)*Ld.y*2.1+Ld.w)*4.5; y+=sin((x+Ld.z)*Ld.y*1.72+Ld.w*1.121)*4.0; y+=sin((x+Ld.z)*Ld.y*2.221+Ld.w*0.437)*5.0; y+=sin((x+Ld.z)*Ld.y*3.1122+Ld.w*4.269)*2.5; y*=Ld.x*0.06; pos_1=pos_1+y; float colL_1=wb1.x*bb1.x*((cos(pos_1*2.*3.14)+1.)/2.)-bb1.x+1.; float colLC_1=clamp(colL_10.0901.0); vec2 posN_1=st*Nf1.x; float colN_1=(snoise(posN_1)*.5+.5); float colNC_1=smoothstep(Nn1.xNx1.xcolN_1); st_2=rotateUV(st_2LR1.y); st_2.x+=cos(st_2.y*dA1.y)/df1.y; st_2.y+=sin(st_2.x*dA1.y)/df1.y; float pos_2=st_2.x*LF1.y; float colL_2=wb1.y*bb1.y*((cos(pos_2*2.*3.14)+1.)/2.)-bb1.y+1.; float colLC_2=clamp(colL_20.0901.0); vec2 posN_2=st_2*Nf1.y; float colN_2=(snoise(posN_2)*.5+.5); float colNC_2=smoothstep(Nn1.yNx1.ycolN_2); st_3=rotateUV(st_3LR1.z); st_3.x+=cos(st_3.y*dA1.z)/df1.z; st_3.y+=sin(st_3.x*dA1.z)/df1.z; float pos_3=st_3.x*LF1.z; float colL_3=wb1.z*bb1.z*((cos(pos_3*2.*3.14)+1.)/2.)-bb1.z+1.; float colLC_3=clamp(colL_30.0901.0); vec2 posN_3=st_3*Nf1.z; float colN_3=(snoise(posN_3)*.5+.5); float colNC_3=smoothstep(Nn1.zNx1.zcolN_3); st_4=rotateUV(st_4LR1.w); st_4.x+=cos(st_4.y*dA1.w)/df1.w; st_4.y+=sin(st_4.x*dA1.w)/df1.w; float pos_4=st_4.x*LF1.w; float colL_4=wb1.w*bb1.w*((cos(pos_4*2.*3.14)+1.)/2.)-bb1.w+1.; float colLC_4=clamp(colL_40.0901.0); vec2 posN_4=st_4*Nf1.w; float colN_4=(snoise(posN_4)*.5+.5); float colNC_4=smoothstep(Nn1.wNx1.wcolN_4); st_5=rotateUV(st_5LR2.x); st_5.x+=cos(st_5.y*dA2.x)/df2.x; st_5.y+=sin(st_5.x*dA2.x)/df2.x; float pos_5=st_5.x*LF2.x; float colL_5=wb2.x*bb2.x*((cos(pos_5*2.*3.14)+1.)/2.)-bb2.x+1.; float colLC_5=clamp(colL_50.0901.0); vec2 posN_5=st_5*Nf2.x; float colN_5=(snoise(posN_5)*.5+.5); float colNC_5=smoothstep(Nn2.xNx2.xcolN_5); vec2 posN_6=st_6*Nf2.y; float colN_6=(snoise(posN_6)*.5+.5); float colNC_6=smoothstep(Nn2.yNx2.ycolN_6); if(indx==1.0){colNC_5=colNC_5+colNC_2; colNC_4=colNC_4+colNC_3; colNC_1=0.108*(colNC_6-0.)+colNC_1; colNC_2=0.292*(colNC_6-0.)+colNC_2; colNC_3=-0.448*(-colNC_6+0.024)+colNC_3;}else if (indx==2.0){colNC_5=colNC_5+colNC_2; colNC_4=1.; colNC_3=0.664*colNC_6+colNC_3; colNC_2=1.664*colNC_6+colNC_2; colNC_1=1.;}else if (indx==3.0){colNC_5=colNC_5+colNC_3; colNC_4=0.032*colNC_6+colNC_4; colNC_3=0.712*colNC_6+colNC_3; colNC_1=0.672*colNC_6+colNC_1;}else if (indx==4.0){colNC_5=colNC_5+colNC_3; colNC_3=1.680*colNC_5+colNC_3-1.; colNC_4=0.784*colNC_6+colNC_4; colNC_3=0.736*colNC_6+colNC_3; colNC_1=-0.016*colNC_6+colNC_1;}else if (indx==5.0){colNC_5=colNC_5+colNC_3; colNC_4=0.016*colNC_6+colNC_4; colNC_3=0.000*colNC_6+colNC_3; colNC_2=0.328*colNC_6+colNC_2; colNC_1=0.992*(colNC_6-0.024)+colNC_1;}else if (indx==6.0){colNC_5=colNC_5+colNC_3;}else if (indx==7.0){colNC_5=colNC_5+colNC_3;}else if (indx==8.0){colNC_5=colNC_5+colNC_3;} float colB_1=BlendScreen(colNC_1colLC_1); float colB_2=BlendScreen(colNC_2colLC_2); float colB_3=BlendScreen(colNC_3colLC_3); float colB_4=BlendScreen(colNC_4colLC_4); float colB_5=BlendScreen(colNC_5colLC_5); float colF_1=SmoothStep(cBlend1.colB_1); float colF_2=SmoothStep(cBlend1.colB_2); float colF_3=SmoothStep(cBlend1.colB_3); float colF_4=SmoothStep(cBlend1.colB_4); float colF_5=SmoothStep(cBlend1.colB_5); float colF=min(colF_1colF_2); colF=min(colFcolF_3); colF=min(colFcolF_4); colF=min(colFcolF_5); color=vec3(colF); gl_FragColor=vec4(color1.0);} "angle=Math.PI/3defaultZoom=1.15zoom=1.15zoomStart=1.15zoomTarg=1.15v=0vStart=0vTarg=0ratio=0camSpeed=.02easing=.05initCamAngle=R.random_int(05)*anglecam=[initCamAngle.PI/6initCamAngleinitCamAngle]camStart=[000]camTarg=[000]rx1=1+R.random_dec()/100ry1=1+R.random_dec()/100rz1=1+R.random_dec()/100rx2=1+R.random_dec()/100ry2=1+R.random_dec()/100rz2=1+R.random_dec()/100rx3=1+R.random_dec()/100ry3=1+R.random_dec()/100rz3=1+R.random_dec()/100;class Go3d{constructor(etroasncil){if(this.verts=[]this.faces=[]this.faceIndx=[]this.gScale=athis.x=0this.y=0this.z=0this.center=new p5.Vectorthis.ballCenter1=new p5.Vectorthis.ballCenter2=new p5.Vector1==e){this.x=tthis.y=rthis.z=othis.verts[0]=createVector(000)this.verts[1]=createVector(-.5481.0971.687)this.verts[2]=createVector(1.22601.687)this.verts[3]=createVector(1.2261.9841.687)this.verts[4]=createVector(1.774.8870)this.verts[5]=createVector(01.9840)this.verts[6]=createVector(-.548-.8871.688)this.verts[7]=createVector(1.7742.87-0);for(let e=0;e<this.verts.length;e++)this.verts[e].x=this.verts[e].x*this.gScale+this.xthis.verts[e].y=this.verts[e].y*this.gScale+this.ythis.verts[e].z=this.verts[e].z*this.gScale+this.z;this.faceIndx=[[012][354][051][531][132][234][024][045]]}else if(2==e){let et=new Face(n.facePts[0]n.facePts[1]n.facePts[2]);e=c;for(let r=0;r<8;r++)this.verts[r]=reflect3d(e.verts[r]t);for(let t=0;t<8;t++)this.faceIndx.push([e.faceIndx[t][0]e.faceIndx[t][2]e.faceIndx[t][1]])}else if(3==e){let e=it=lr=c;for(let o=0;o<8;o++)this.verts[o]=scale3d(r.verts[o]et);for(let e=0;e<8;e++)this.faceIndx.push([r.faceIndx[e][0]r.faceIndx[e][1]r.faceIndx[e][2]])}this.ballCenter1=this.verts[6]this.ballCenter2=this.verts[7]this.center=vertex_average([this.verts[0]this.verts[1]this.verts[2]this.verts[3]this.verts[4]this.verts[5]]);for(let e=0;e<8;e++){let t;t=e<2?"e":"i"this.faces.push(new Face(this.verts[this.faceIndx[e][0]]this.verts[this.faceIndx[e][1]]this.verts[this.faceIndx[e][2]]t))}}}class Grid_Rhomb{constructor(etro){this.gPts=[]this.gIndx=[]this.vecNum=3this.moveVectors=new p5.Vector(2*this.vecNum)this.moveVectorsIndx=new Array(2*this.vecNum)this.gVectors=new p5.Vectorthis.w=ethis.h=tthis.l=rthis.gridScale=othis.moveVectorSize=2*this.vecNumthis.gVectors=this.findDodecaVectors();for(let e=0;e<20;e++)this.gVectors[e].mult(2);this.moveVectors[0]=this.gVectors[0]this.moveVectors[1]=this.gVectors[1]this.moveVectors[2]=this.gVectors[10]this.moveVectors[3]=this.gVectors[17]this.moveVectors[4]=this.gVectors[18]this.moveVectors[5]=this.gVectors[8]this.moveVectorsIndx[0]=0this.moveVectorsIndx[1]=1this.moveVectorsIndx[2]=10this.moveVectorsIndx[3]=17this.moveVectorsIndx[4]=18this.moveVectorsIndx[5]=8;for(let e=0;e<this.l;e++){this.gPts[e]=[]this.gIndx[e]=[];for(let t=0;t<this.w;t++){this.gPts[e][t]=[]this.gIndx[e][t]=[];for(let r=0;r<this.h;r++){let o=new p5.Vector(this.moveVectors[0].xthis.moveVectors[0].ythis.moveVectors[0].z)a=new p5.Vector(this.moveVectors[1].xthis.moveVectors[1].ythis.moveVectors[1].z)s=new p5.Vector(this.moveVectors[2].xthis.moveVectors[2].ythis.moveVectors[2].z)n=.5*this.w;o.mult((e-n)*this.gridScale)a.mult((t-n)*this.gridScale)s.mult((r-n)*this.gridScale);let c=new p5.Vector(000);c.add(o)c.add(a)c.add(s)this.gPts[e][t][r]=new p5.Vector(c.xc.yc.z)this.gIndx[e][t][r]=new p5.Vector(etr)}}}}findDodecaVectors(){let e=[]t=[]r=52.6226359o=10.81231754a=1s=PI*r/180n=PI*o/180c=PI*-o/180i=PI*-r/180l=72*PI/180m=l/2d=0h=createVector(000);for(let e=0;e<5;e++)t[e]=[]t[e][0]=a*cos(d)*cos(s)t[e][1]=a*sin(d)*cos(s)t[e][2]=a*sin(s)t.push(h)d+=l;d=0;for(let e=5;e<10;e++)t[e]=[]t[e][0]=a*cos(d)*cos(n)t[e][1]=a*sin(d)*cos(n)t[e][2]=a*sin(n)d+=l;d=m;for(let e=10;e<15;e++)t[e]=[]t[e][0]=a*cos(d)*cos(c)t[e][1]=a*sin(d)*cos(c)t[e][2]=a*sin(c)d+=l;d=m;for(let e=15;e<20;e++)t[e]=[]t[e][0]=a*cos(d)*cos(i)t[e][1]=a*sin(d)*cos(i)t[e][2]=a*sin(i)d+=l;for(let r=0;r<20;r++)e.push(new p5.Vector(t[r][0]t[r][1]t[r][2]));return e}}class GrowSys{constructor(e){this.gens=ethis.gen1=0}growToTarget(e){let t=er=!0o=currGoa=o.verts[3].dist(o.verts[0])s=0;for(;1==r;){s+=1o=currGo;let e=o.center.dist(t);if(e>a&&s<199){let e=[];e=this.growByBall(ot);let ra=99s=9999;for(let o=0;o<e.length;o++){let n=e[o];r=n.center.dist(t)r<s&&(s=ra=o)go.push(n)}currGo=e[a]}else r=!1go=this.remDups(go)this.gen1=go.length1==DECORATE&&this.decorate()go=this.remDups(go)}}growByBall(et){let r=[]o=ea=ts=99;return s=o.faces[0].center.dist(a)<=o.faces[1].center.dist(a)?0:1r=this.render(Lstringos)r}decorate(){let e=go.length;for(let t=0;t<=this.gens;t++){for(let t=currArraySize;t<e;t++){let e=[]r=0;if(rand=R.random_dec()rand>growth_percent){let oa=go[t];rand1=R1.random_dec()rand1>growth_type_ratio?(o=a.ballCenter1r=0):(o=a.ballCenter2r=3);let s=0n=go[0].center.dist(go[0].faces[0].center);for(let e=0;e<go.length;e++)go[e].center.dist(o)<n&&(s=1);if(0==s){go.push(new Go3d(3void 0void 0void 0void 0void 0void 0ao.5))a=go[go.length-1];let t=!0s=""n=0;for(;1==t;){rand2=R2.random_dec();let e=small_death_chance;rand2>e?(s+="f"n+=1n>=4&&(s+="+"n=0)rand3=R3.random_dec()e=.98rand3>e&&(s+="/"n=0)):t=!1}e=this.render(sar)e=this.remDups(e)e=this.remFaces(e);for(let t=0;t<e.length;t++)go.push(e[t])}}}currArraySize=ee=go.length}}remDups(e){for(let t=0;t<e.length;t++){let r=e[t];for(let o=0;o<e.length;o++)if(o!=t){let t;t=e[o]r.center.dist(t.center)<.1&&e.splice(o1)}}return e}remFaces(e){for(let t=0;t<e.length;t++){e[t];for(let r=0;r<e.length;r++)if(r!=t)for(let o=0;o<e[t].faces.length;o++){let a=e[t].faces[o].center;for(let s=0;s<e[r].faces.length;s++)if(a.dist(e[r].faces[s].center)<.1){e[t].faces.splice(o1)e[r].faces.splice(s1);break}}}return e}render(etr){let oa=es=tn=a.lengthc=[]i=2;o=0==r?0:3;for(let e=0;e<n;e++){let t=a.charAt(e);if("f"==t){0==o?i=2==i?6:2:1==o?i=2==i?4:4==i?2:4:2==o?i=2==i?6:6==i?2:6:3==o?i=3==i?5:3:4==o&&(i=5==i?7:5)c.push(new Go3d(2void 0void 0void 0void 0void 0s.faces[i]s));let e=c[c.length-1];s=e}else"+"==t?o<3?(o+=1o>2&&(o=0)):(o+=1o>4&&(o=3)):"/"==t&&(o=o<3?3:0)}return c}}class Face{constructor(etro){this.type=othis.facePts=[]this.center=new p5.Vectorthis.facePts[0]=createVector(e.xe.ye.z)this.facePts[1]=createVector(t.xt.yt.z)this.facePts[2]=createVector(r.xr.yr.z)this.center=vertex_average(this.facePts)this.normal=p5.Vector.sub(this.facePts[1]this.facePts[0]).cross(p5.Vector.sub(this.facePts[2]this.facePts[0]))this.normal.mult(-1)this.normal.normalize()}}</script><style type="text/css">html {
  height: 100%;
}
body {
  min-height: 100%;
  margin: 0;
  padding: 0;
}
canvas {
  padding: 0;
  margin: auto;
  display: block;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}</style></head></html>